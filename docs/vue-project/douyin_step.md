# 抖音 web step

<div style="color: red;padding: 16px 0; font-weight: 600;color: rgb(82 82 82); display: flex;gap: 10px;">
    <span>标签：</span>
    <Badge type="tip" text="工作" />
    <Badge type="tip" text="初始化" />
    <Badge type="tip" text="原子化" />
</div>

<div style="color: red; font-weight: 600;color: rgb(82 82 82);">
    <span>创建时间：</span>
    <Badge type="tip" text="2024-05-07" />
</div>

模板表格
| 功能点 | 知识点 | 备注 | 卡住 | 记录日期 | 处理日期 | 位置 | 查找注释 |
| ------ | ------ | ---- | ---- | -------- | -------- | ---- | -------- |
|        |        |      |      |          |          |      |          |
|        |        |      |      |          |          |      |          |
|        |        |      |      |          |          |      |          |
|        |        |      |      |          |          |      |          |
|        |        |      |      |          |          |      |          |
|        |        |      |      |          |          |      |          |
|        |        |      |      |          |          |      |          |
|        |        |      |      |          |          |      |          |
|        |        |      |      |          |          |      |          |


## 步骤

首先分析不同模块对应的代码分类，做好拆分，方便后续处理【05-07】

**步骤0.0** 配置处理

## 主体结构搭建

### 步骤1.0 footer 的搭建【05-08】

| 功能点                      | 知识点    | 备注 | 卡住 | 记录日期   | 处理日期 | 位置                   | 查找注释     |
| --------------------------- | --------- | ---- | ---- | ---------- | -------- | ---------------------- | ------------ |
| 目录结构分析                |           |      |      | 2024-05-07 |          |                        |              |
| map                         | map的作用 |      |      | 2024-05-08 |          |                        |              |
| 选中时动态样式/获取路由信息 |           | blog |      | 2024-05-08 |          |                        |              |
| 相对布局未生效              |           |      | 001  | 2024-05-08 |  2024-05-19        | comp/footer/footer.vue | 相对布局错误 |
| 处理浏览器底部状态栏        |           | blog |      | 2024-05-08 |   2024-05-19       |                        | 遮挡问题     |
| tab切换tab的加载效果        |           |      |      |            |          |                        |              |
| 商城中背景颜色的切换        |           |      |      |            |          |                        |              |

待理解的点

| 疑惑点             | 时间       |      |
| ------------------ | ---------- | ---- |
| 源码中的$bus的理解 | 2024-05-08 |      |
| initTab的使用      | 2024-05-08 |      |
|                    |            |      |
|                    |            |      |
|                    |            |      |

### 封装一

| 功能点 | 知识点 | 备注 | 卡住 | 记录日期 | 处理日期 | 位置 | 查找注释 |
| ------ | ------ | ---- | ---- | -------- | -------- | ---- | -------- |
| 左右中插槽封装 |        | 消息页面header |      | 2024-05-09 |   2024-05-19       |      |          |
| 动态添加类名的两种方式 |        | 三元表达式/为真时添加 |      | 2024-05-09 |          |      |          |
| 作用域插槽的使用方法 |        |      |      | 2024-05-09 |    2024-05-19      |      |          |
| 插槽和传入组件之间的区别，跟react直接传递组件的区别 |        |      |      | 2024-05-09 |          |      |          |
|        |        |      |      |          |          |      ||

2024-05-10 处理表信息，user和post的数据分析
2024-05-11 处理me页面的编辑个人信息和信息获取
2024-05-12 处理me页面可根据参数更改数据库信息

todo
2024-05-13 处理视频slide(前端)--处理video
2024-05-14 处理首页组件封装问题--不知道搞了啥，想往pc抖音发展了，css样式，获取个store的数据都不通
2024-05-15 很迷茫，啥都没搞，css出了很大问题，很烦躁
2024-05-16 基础》练习》总结》部署》》--搞了css的内容
2024-05-17 按照module 划分目录-上篇（node-wanghao.net）
2024-05-18 node下篇
2024-05-19 抖音前端部分，将me部分抽离，将样式处理好，插槽和组件的封装

2024-05-20 (计划画完me页面，动态显示数据，还没做修改【还要处理弹出框组件，侧边弹出，底部弹出】->处理首页的视频->处理评论和滑动视频部分)--实际上是，处理me页面，完善，构建组件完善，可处理click函数-求更新页面底部两个按钮样式出错

2024-05-21 处理首页的布局，增加public页面处理视频上传功能
2024-05-22 准备文件上传后端接口部分-处理上传操作前端和后端
2024-05-23 处理视频信息，上传的视频对应的用户的信息，用于首页展示，主要处理后端
2024-05-24 （计划-处理前端上传文件和首页渲染，后端处理数据库的连表数据返回）
2024-05-24 从睡不着开始5：00到14：00，18：00-01：00 玩了一天的黄金与机械
2024-05-25 

2024-05-27 视频首页初步完成，待页面缓存数据（下一步-处理视频上传，视频渲染，评论渲染，点赞，收藏--部署上线--简历-me页面---总结--bug--消息--）

2024-05-28 （槽点--video很多内容移动不生效或者不正确生效问题）me页面持久化处理

2024-05-30 todo-小型的项目规范化demo，处理好每个模块之间的关系①
			大型通用的包括注册登录，上传图片视频，每个模块crud等的操作②

2024-05-31 将前端上传处理好，me页面渲染处理好

2024-06-01 将视频获取处理好，喜欢收藏等数量，新的布局待处理

2024-06-02 修补关注状态，喜欢状态，收藏状态，而不是前端处理
2024-06-03 处理宝塔部署（偷懒-因为早上已经是处理好部署的东西了，）
2024-06-04 处理简易前端，部署前端


### 步骤2.0 me 页面的处理

类名命名的时候总磕磕绊绊，写样式的时候也是磕磕绊绊


### 待解决

2024-05-19
interface Props 的大小写问题
获取meta问题，Footer问题，ts爆红问题
Props传递到组件的数组是否使用v-bind问题【v-if和v-bind】，参考components/header/header.vue
还要处理弹出框组件，侧边弹出，底部弹出
插槽和组件的对比

2024-05-20
组件通信
父组件向子组件传递动态属性值或方法

抽离组件，父组件向子组件传递属性值或方法，通常用于书写样式结构
子组件传递属性和方法给父组件

父组件调用子组件的方法
子组件调用父组件的方法，

利用interface做类型时，提示显示难看问题？

2024-05-21
position: fixed;--解决底部阻挡显示原理？不懂

2024-05-22
引用组件的盒子的样式，也就是外部样式要怎么写，在哪里写

2024-05-23
很糟糕，组件和插槽的区别倒是是啥
处理视频上传
代办-视频的处理ffmeg，对视频的处理，中间件，获取视频的内部信息，和图片jimp信息处理

2024-05-30
service模块的跟数据库方面的逻辑，返回给controller要进行怎么样的处理，错误提示怎么处理等

2024-05-31
获取视频信息（video.service.js），使用join和不适用join都有什么区别，都是怎么写的
既然现在返回的是视频的链接，那么预加载效果怎么实现，如果是返回的数据流，预加载就是下载-0531
参考user表和follow(fllow)表，尽量选择完整正确的单词命名字段和函数变量名等

2024-06-01
后端没部署，手机端访问不到视频信息和个人信息

2024-06-02
接口考虑不周，现在要重新处理，是否喜欢（收藏）该视频视频的查询没有做，而且这个应该是后端做，而不是前端


部署失败经历
1. mysql设置密码失败-》【重置服务器】
2. mysql配置远程登录失败-》宝塔设置mysql失败（无法连接本地数据库）-》【重置服务器】
3. 继续处理宝塔，数据库还是安装失败（无法）【重置服务器】
	1. 镜像切换=》宝塔部署，开放端口，处理数据库，部署项目，启动命令不懂处理root处理，启动生效后也不发访问，需要配置服务器0.0.0.0端口，宝塔防火墙端口=》成功
4. 前端部署，也要开放服务器和宝塔的端口
5. 前端部署css路径问题,base路径处理
6. sslz证书获取+配置
7. 阿帕奇下载配置
8. vercel配置ssl


2024-06-05 先是04号以为部署前端不会出幺蛾子，后面搞到了5号，一直没弄好，后面不知道打包怎么好的，之前加了base也是不行，后面卸了nginx，装了阿帕奇，处理了ssl，ssl访问不了，https配置不了，域名配置不了，备案需要重新备案，总之一团糟

从开始部署开始，状态挺差的，心态也崩

2024-06-06 处理了域名问题，再vercel上处理了域名，当时www.wuweibin.com为什么在edge可以访问，在google却不行，但后面又可以了？怎么其奇怪的
不知道怎么搞的，新增了个php的博客项目，导致没启动项目，出现netweork error 的情况，ssl没配置好
新增了nginx.wuweibin.com的域名，提示要进行备案
开始重新写代码
因为后端的接口是http,vercel会报错，所以用node处理了https生成，自己还拿服务器的地址去测试，导致一致用不了，其实博客写的是对的，但我应该拿本地的地址去测试
域名证书不对问题，vercel地址和后端ip地址对应的域名不匹配
老是出幺蛾子，草
直接用ip地址访问，
回退操作处理3000端口，提示跨域，其实不是真的的没有配置，以为我并没有修改跨域的代码，二十因为把安全组的东西去除了
后面又提示找不到资源，因为我以为是代码变了，所以重新上传了文件，把原来的文件删除了，后面开启了端口之后，发现资源找不到了，所以，真tm的难受
现在是十一点，早上六点多七点，处理到现在，又白忙了，域名还没配置好
处理本地数据库和线上的数据库保持一致

还有个问题就是一开始不知道谷歌不能访问，edge可以访问的问题

2024-06-07
封装登录权限，登录注册页面
2024-06-08
处理me页面，个人信息部分应该由后端生成
2024-06-09
处理了一些me页面的内容，修修改任信息部分

2024-06-10 
处理message的内容，me页面的作品展示内容

2024-06-11
利用pinia的数据，也用到了组件传递的props,此时的双向绑定需要理解
见@comp/BottomSheet.vue[CenterSheet.vue]
显示获赞数的处理，结合pinia,me页面showMyVideoLike方法
如果选择封面或者填写描述的时候，刷新了页面，视频的内容会不见，此时返回视频预览页面会出现bug【持久化】

先写描述，再选封面，回来之后，描述不见了

上传图片封面的，后端图片的信息没有保存下来，只保存了链接
视频信息表没有存视频链接？，这个都没处理好？

2024-06-12

message页面个人信息刷新消息，需要做持久化
headerslot改动之后，me页面的搜索有样式问题，对应的时message中的个人聊天组件的headerslot
视频发布页面的样式还是存在问题
fixed问题

删除node宝塔数据库，重新新增数据，删除项目的所有文件之后，再次上传需要安装模块
basevideo的视频和homeview的视频不一致问题

链接上数据库可视化，之前连不上是因为端口3306没有开放，然后跟着gpt做就可以了

2024-06-13
因为要面试，把airbnb的没做的部分抄全了很大一部分，大概到6-7小时这里，晚上视频面试

2024-06-14
投简历投得有些自闭，然后就放松警惕，准备背node的面试题来着，后面开始下载游戏，开始了觉醒之战，玩了很久

2024-06-15
昨晚面试玩，开始下载王者，玩到周六，周六也玩，玩了一整天

2024-06-16

| 功能点               | 知识点 | 备注                     | 卡住 | 记录日期 | 处理日期 | 位置 | 查找注释 |
| -------------------- | ------ | ------------------------ | ---- | -------- | -------- | ---- | -------- |
| 左右排版插槽的封装   |        | 头部header               |      |          |   2024-05-19       |      |          |
| 左中排版的封装       |        | （编辑个人资料）返回操作 |      |          |   2024-05-19       |      |          |
| 左中右排版插槽的封装 |        | （求更新）               |      |          |     2024-05-19     |      |          |
| 横轴排版的封装       |        |                          |      |          |          |      |          |
| 纵轴排版的封装       |        |                          |      |          |          |      |          |
| 视频组件的封装       |        |                          |      |          |          |      |          |
| 组件的拆分           |        |                          |      |          |          |      |          |
|                      |        |                          |      |          |          |      |          |
|                      |        |                          |      |          |          |      |          |
|                      |        |                          |      |          |          |      |          |
|                      |        |                          |      |          |          |      |          |

### 首页处理

dispaly: flex;是相对于html的问题,我想要的效果是相对于app.vue的最大是480px的定位的，这导致按f12放大之后会出现问题，小于480的时候影响不大。---2024-05-21